---
// SignIn.astro
import { getSession } from "auth-astro/server";
//
import { Button, Dropdown, Menu, MenuButton, MenuItem } from "@mui/joy";
import { LogInIcon, LogOutIcon, UserRound } from "lucide-react";
const session = await getSession(Astro.request);
---

{
    session?.data?.user ? (
        <Dropdown>
            <MenuButton variant="plain">
                <UserRound />
            </MenuButton>
            <Menu>
                <MenuItem id="logout">
                    <LogOutIcon />
                </MenuItem>
            </Menu>
        </Dropdown>
    ) : (
        false
    )
}
{
    !session?.data?.user ? (
        <Button id="login" variant="plain">
            <LogInIcon />
        </Button>
    ) : null
}
<script>
    const { signIn, signOut } = await import("auth-astro/client");
    document.querySelector("#login").onclick = () => signIn("github");
    document.querySelector("#logout").onclick = () => signOut();
</script>
